(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22bde2db"],{"0f87":function(t,e,a){"use strict";var o=a("76dc"),i=a.n(o);i.a},2568:function(t,e,a){},"2e29":function(t,e,a){},6716:function(t,e,a){"use strict";var o=a("839e"),i=a.n(o);i.a},"76dc":function(t,e,a){},"839e":function(t,e,a){},9910:function(t,e,a){"use strict";a.d(e,"a",function(){return l});var o=a("80d2"),i=a("a523"),n=a("549c"),s=a("0e8f"),r=a("a722"),l=Object(o["f"])("spacer","div","v-spacer");i["a"],n["a"],s["a"],r["a"]},a523:function(t,e,a){"use strict";a("db6d");var o=a("e8f2");e["a"]=Object(o["a"])("container")},a722:function(t,e,a){"use strict";a("db6d");var o=a("e8f2");e["a"]=Object(o["a"])("layout")},c341:function(t,e,a){"use strict";var o=a("80d2"),i=function(t){var e=t.touchstartX,a=t.touchendX,o=t.touchstartY,i=t.touchendY,n=.5,s=16;t.offsetX=a-e,t.offsetY=i-o,Math.abs(t.offsetY)<n*Math.abs(t.offsetX)&&(t.left&&a<e-s&&t.left(t),t.right&&a>e+s&&t.right(t)),Math.abs(t.offsetX)<n*Math.abs(t.offsetY)&&(t.up&&i<o-s&&t.up(t),t.down&&i>o+s&&t.down(t))};function n(t,e){var a=t.changedTouches[0];e.touchstartX=a.clientX,e.touchstartY=a.clientY,e.start&&e.start(Object.assign(t,e))}function s(t,e){var a=t.changedTouches[0];e.touchendX=a.clientX,e.touchendY=a.clientY,e.end&&e.end(Object.assign(t,e)),i(e)}function r(t,e){var a=t.changedTouches[0];e.touchmoveX=a.clientX,e.touchmoveY=a.clientY,e.move&&e.move(Object.assign(t,e))}function l(t){var e={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:t.left,right:t.right,up:t.up,down:t.down,start:t.start,move:t.move,end:t.end};return{touchstart:function(t){return n(t,e)},touchend:function(t){return s(t,e)},touchmove:function(t){return r(t,e)}}}function c(t,e,a){var i=e.value,n=i.parent?t.parentElement:t,s=i.options||{passive:!0};if(n){var r=l(e.value);n._touchHandlers=Object(n._touchHandlers),n._touchHandlers[a.context._uid]=r,Object(o["r"])(r).forEach(function(t){n.addEventListener(t,r[t],s)})}}function u(t,e,a){var i=e.value.parent?t.parentElement:t;if(i&&i._touchHandlers){var n=i._touchHandlers[a.context._uid];Object(o["r"])(n).forEach(function(t){i.removeEventListener(t,n[t])}),delete i._touchHandlers[a.context._uid]}}e["a"]={inserted:c,unbind:u}},e2b2:function(t,e,a){},ec50:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Breadcrumbs",{attrs:{items:t.items}}),a("v-card",[a("v-card-title",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:"",sm4:"",md2:""}},[a("v-text-field",{attrs:{label:"角色名称"},model:{value:t.role_name_,callback:function(e){t.role_name_=e},expression:"role_name_"}})],1),a("v-spacer"),t._l(t.root_path,function(e,o){return["/api/v1/manages/add_role"==e.url?a("Module",{key:o}):t._e()]}),a("Module1",{ref:"module1"}),a("Module2",{ref:"module2"})],2)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.desserts_,"total-items":0,"rows-per-page-text":"每页行数","rows-per-page-items":t.pagingList,"disable-initial-sort":!0,loading:t.loader,"hide-actions":!0},on:{"update:pagination":t.info},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",{on:{dblclick:function(a){return t.detailsMessage(e.item)}}},[a("td",[t._v(t._s(e.index+1))]),a("td",{staticClass:"text-xs-centre"},[t._v(t._s(e.item.role_name))]),a("td",{staticClass:"text-xs-centre"},[t._v(t._s(1==e.item.level?"管理人员":"代理人员"))]),a("td",{staticClass:"text-xs-centre"},[t._v(t._s(t._f("time")(e.item.create_time)))]),a("td",{staticClass:"text-xs-centre"},[t._v(t._s(t._f("time")(e.item.update_time)))]),a("td",{staticClass:"text-xs-centre"},[a("v-chip",{staticClass:"ml-0",attrs:{color:"teal lighten-4",label:"",small:""}},[t._v(" "+t._s(e.item.root_path.length)+" 个权限 ")])],1),a("td",{staticClass:"text-xs-centre"},[a("v-btn",{attrs:{text:"",icon:""},on:{click:function(a){return t.detailsMessage(e.item)}}},[a("v-icon",{attrs:{color:"primary"}},[t._v("visibility")])],1),t._l(t.root_path,function(o,i){return["/api/v1/manages/edit_role"==o.url?a("v-btn",{key:i,attrs:{text:"",icon:""},on:{click:function(a){return t.modifyMessage(e.item)}}},[a("v-icon",{attrs:{color:"warning"}},[t._v("edit")])],1):t._e()]}),t._l(t.root_path,function(o,i){return["/api/v1/manages/delete_role"==o.url?a("v-btn",{key:i,attrs:{text:"",icon:""},on:{click:function(a){return t.delMessage_box(e.item.role_id)}}},[a("v-icon",{attrs:{color:"error"}},[t._v("clear")])],1):t._e()]})],2)])]}},{key:"no-data",fn:function(){return[a("p",{staticClass:"p_text"},[t._v(" 没有更多数据了 :( ")])]},proxy:!0},{key:"pageText",fn:function(e){return[t._v("当前 "+t._s(e.pageStart)+" - "+t._s(e.pageStop)+" 总共 "+t._s(e.itemsLength))]}}])})],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.dialog_logout,callback:function(e){t.dialog_logout=e},expression:"dialog_logout"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("删除操作")]),a("v-card-text",[t._v(" 确认删除该角色吗？（删除角色将会把该角色下的所有管理/代理账号一同删除） ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(e){t.dialog_logout=!1}}},[t._v("取消")]),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:t.delMessage}},[t._v("确认删除")])],1)],1)],1)],1)},i=[],n=(a("4917"),a("5fdf")),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"switch_"}},[a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-dialog",{attrs:{persistent:"","max-width":"800px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-btn",t._g({attrs:{color:"primary",flat:"",dark:""}},o),[t._v("+ 创建角色(权限层级)")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("创建角色(权限层级)")])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"角色名称（2-16）",type:"text",required:""},model:{value:t.role_name,callback:function(e){t.role_name=e},expression:"role_name"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-select",{attrs:{items:["管理人员","代理人员"],label:"管理/代理角色",required:""},model:{value:t.level,callback:function(e){t.level=e},expression:"level"}})],1),t._l(t.root_path,function(e,o){return a("v-flex",{key:o,attrs:{xs12:"",sm6:"",md3:"",lg3:""}},[a("v-switch",{attrs:{color:"red darken-3",label:e.name},model:{value:e.state,callback:function(a){t.$set(e,"state",a)},expression:"item.state"}})],1)})],2)],1),a("small",[t._v('*敏感的权限请谨慎添加( "用户"包含患者和医生 )')])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(e){t.dialog=!1}}},[t._v("取消")]),a("v-btn",{attrs:{color:"info darken-1"},on:{click:function(e){return t.childMethod(e)}}},[t._v("提交")])],1)],1)],1)],1)],1)},r=[],l=(a("ac6a"),{data:function(){return{dialog:!1,role_name:"",level:"",root_path:[]}},mounted:function(){var t=this,e=this.$cookie.getLocalStorage("root_path").root_path;e.forEach(function(e){e.state=!1,t.root_path.push(e)})},methods:{childMethod:function(){var t=this;if(this.role_name.length<2||this.role_name.length>16)return this.$Dialog.getProductCheckResult_({text:"请输入正确的角色名称（6-16位）!",timeout:3e3,snackbar:!0}),!1;if(""==this.level)return this.$Dialog.getProductCheckResult_({text:"请选择一个管理/代理!",timeout:3e3,snackbar:!0}),!1;var e=[];this.root_path.forEach(function(t){t.state&&e.push(t)}),this.$axios({method:"post",url:this.$apis.URL.manages_add_role,data:{role_name:this.role_name,level:"管理人员"==this.level?1:"代理人员"==this.level?2:1,root_path:e}}).then(function(e){0===e.data.result?(t.$Dialog.getProductCheckResult_({text:"角色添加成功!",timeout:3e3,snackbar:!0}),t.role_name="",t.level="",t.dialog=!1,t.$parent.$parent.info()):t.$Dialog.getProductCheckResult_({text:e.data.message,timeout:3e3,snackbar:!0})}).catch(function(e){t.$Dialog.getProductCheckResult_({text:e,timeout:3e3,snackbar:!0})})}}}),c=l,u=(a("6716"),a("2877")),d=a("6544"),h=a.n(d),v=a("8336"),f=a("b0af"),_=a("99d9"),m=a("12b2"),p=a("a523"),g=a("169a"),x=a("0e8f"),b=a("a722"),k=a("b56d"),C=a("9910"),V=(a("94a7"),a("2e29"),a("5368")),w=a("c341"),$=a("0789"),y=a("490a"),D=a("80d2"),S=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t},M={name:"v-switch",directives:{Touch:w["a"]},mixins:[V["a"]],props:{loading:{type:[Boolean,String],default:!1}},computed:{classes:function(){return{"v-input--selection-controls v-input--switch":!0}},switchData:function(){return this.setTextColor(this.loading?void 0:this.computedColor,{class:this.themeClasses})}},methods:{genDefaultSlot:function(){return[this.genSwitch(),this.genLabel()]},genSwitch:function(){return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",this.$attrs),this.genRipple(this.setTextColor(this.computedColor,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",S({staticClass:"v-input--switch__track"},this.switchData)),this.$createElement("div",S({staticClass:"v-input--switch__thumb"},this.switchData),[this.genProgress()])])},genProgress:function(){return this.$createElement($["b"],{},[!1===this.loading?null:this.$slots.progress||this.$createElement(y["a"],{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft:function(){this.isActive&&this.onChange()},onSwipeRight:function(){this.isActive||this.onChange()},onKeydown:function(t){(t.keyCode===D["q"].left&&this.isActive||t.keyCode===D["q"].right&&!this.isActive)&&this.onChange()}}},R=a("2677"),E=Object(u["a"])(c,s,r,!1,null,null,null),L=E.exports;h()(E,{VBtn:v["a"],VCard:f["a"],VCardActions:_["a"],VCardText:_["b"],VCardTitle:m["a"],VContainer:p["a"],VDialog:g["a"],VFlex:x["a"],VLayout:b["a"],VSelect:k["a"],VSpacer:C["a"],VSwitch:M,VTextField:R["a"]});var T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"switch_"}},[a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("修改角色（权限层级）")])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"角色名称（2-16）",type:"text",required:""},model:{value:t.role_name,callback:function(e){t.role_name=e},expression:"role_name"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-select",{attrs:{items:["管理人员","代理人员"],label:"管理/代理角色",required:""},model:{value:t.level,callback:function(e){t.level=e},expression:"level"}})],1),t._l(t.root_path,function(e,o){return a("v-flex",{key:o,attrs:{xs12:"",sm6:"",md3:"",lg3:""}},[a("v-switch",{attrs:{color:"red darken-3",label:e.name},model:{value:e.state,callback:function(a){t.$set(e,"state",a)},expression:"item.state"}})],1)})],2)],1),a("small",[t._v("*敏感的权限请谨慎添加")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(e){t.dialog=!1}}},[t._v("取消")]),a("v-btn",{attrs:{color:"info darken-1"},on:{click:function(e){return t.childMethod(e)}}},[t._v("提交修改")])],1)],1)],1)],1)],1)},j=[],P=(a("7f7f"),{data:function(){return{dialog:!1,role_id:"",role_name:"",level:"",root_path:[]}},mounted:function(){},methods:{info:function(t){var e=this;this.role_id=t.list.role_id,this.role_name=t.list.role_name,this.level=1==t.list.level?"管理人员":2==t.list.level?"代理人员":"管理人员",this.root_path=[],this.dialog=t.state;var a=this.$cookie.getLocalStorage("root_path").root_path;a.forEach(function(t){t.state=!1,e.root_path.push(t)}),t.list.root_path.forEach(function(t){e.root_path.forEach(function(e){if(t.name==e.name)return e.state=!0,!1})})},childMethod:function(){var t=this;if(this.role_name.length<2||this.role_name.length>16)return this.$Dialog.getProductCheckResult_({text:"请输入正确的角色名称（6-16位）!",timeout:3e3,snackbar:!0}),!1;if(""==this.level)return this.$Dialog.getProductCheckResult_({text:"请选择一个管理/代理!",timeout:3e3,snackbar:!0}),!1;var e=[];this.root_path.forEach(function(t){t.state&&e.push(t)}),this.$axios({method:"post",url:this.$apis.URL.manages_edit_role,data:{role_id:this.role_id,role_name:this.role_name,level:"管理人员"==this.level?1:"代理人员"==this.level?2:1,root_path:e}}).then(function(e){0===e.data.result?(t.$Dialog.getProductCheckResult_({text:"修改角色成功!",timeout:3e3,snackbar:!0}),t.role_name="",t.level="",t.dialog=!1,t.$parent.$parent.info()):t.$Dialog.getProductCheckResult_({text:e.data.message,timeout:3e3,snackbar:!0})}).catch(function(e){t.$Dialog.getProductCheckResult_({text:e,timeout:3e3,snackbar:!0})})}}}),O=P,X=(a("0f87"),Object(u["a"])(O,T,j,!1,null,null,null)),Y=X.exports;h()(X,{VBtn:v["a"],VCard:f["a"],VCardActions:_["a"],VCardText:_["b"],VCardTitle:m["a"],VContainer:p["a"],VDialog:g["a"],VFlex:x["a"],VLayout:b["a"],VSelect:k["a"],VSpacer:C["a"],VSwitch:M,VTextField:R["a"]});var A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"switch__"}},[a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-dialog",{attrs:{"max-width":"800px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("角色详情")])]),a("v-card-text",[a("p",{staticClass:"root_p"},[t._v("\n            角色名称\n            "),a("v-chip",[t._v(t._s(t.data.role_name))])],1),a("p",{staticClass:"root_p"},[t._v("\n            管理/代理\n            "),a("v-chip",[t._v(t._s(1==t.data.level?"管理人员":2==t.data.level?"代理人员":"管理人员"))])],1),a("p",{staticClass:"root_p"},[t._v("\n            创建时间\n            "),a("v-chip",[t._v(t._s(t._f("time")(t.data.create_time)))])],1),a("p",{staticClass:"root_p"},[t._v("\n            上次修改时间\n            "),a("v-chip",[t._v(t._s(t._f("time")(t.data.update_time)))])],1),a("p",{staticClass:"root_p"},[t._v("已获得的权限")]),a("v-flex",{attrs:{md12:"",sm12:""}},t._l(t.data.root_path,function(e,o){return a("v-chip",{key:o,staticClass:"text-xs-center"},[t._v(t._s(e.name))])}),1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"info darken-1"},on:{click:function(e){t.dialog=!1}}},[t._v("确认")])],1)],1)],1)],1),a("v-snackbar",{attrs:{right:!0,timeout:t.alert.timeout,top:!0,"multi-line":!0},model:{value:t.alert.snackbar,callback:function(e){t.$set(t.alert,"snackbar",e)},expression:"alert.snackbar"}},[t._v("\n    "+t._s(t.alert.text)+"\n    "),a("v-btn",{attrs:{color:"pink",flat:""},on:{click:function(e){t.alert.snackbar=!1}}},[t._v("确认")])],1)],1)},q=[],B={data:function(){return{alert:{text:"",timeout:3e3,snackbar:!1},dialog:!1,data:{}}},mounted:function(){},methods:{info:function(t){this.dialog=t.state,this.data=t.list}}},F=B,H=(a("ef8e"),a("cc20")),U=a("2db4"),I=Object(u["a"])(F,A,q,!1,null,null,null),J=I.exports;h()(I,{VBtn:v["a"],VCard:f["a"],VCardActions:_["a"],VCardText:_["b"],VCardTitle:m["a"],VChip:H["a"],VDialog:g["a"],VFlex:x["a"],VLayout:b["a"],VSnackbar:U["a"],VSpacer:C["a"]});var z={components:{Breadcrumbs:n["a"],Module:L,Module1:Y,Module2:J},data:function(){return{role_name_:"",dialog_logout:!1,infoData:!1,pagingList:[100,{text:"100",value:100}],loader:!1,id:1,items:[{text:"首页",disabled:!1,to:"/home"},{text:"角色列表",disabled:!1,to:"/roleList"}],headers:[{text:"#",align:"left",sortable:!1,value:"name"},{text:"角色名称",value:"calories",sortable:!1},{text:"管理/代理",value:"calories",sortable:!1},{text:"创建时间",value:"fat",sortable:!1},{text:"修改时间",value:"carbs",sortable:!1},{text:"描述",value:"protein",sortable:!1},{text:"操作",value:"iron",sortable:!1}],desserts:[],root_path:this.$cookie.getLocalStorage("root_path").root_path}},computed:{desserts_:function(){var t=this;return this.desserts.filter(function(e){return e.role_name.match(t.role_name_)})}},methods:{loader_:function(){var t=this;this.loader=!0,setTimeout(function(){return t.loader=!1},500)},info:function(){var t=this;this.loader=!0,this.$axios({method:"post",url:this.$apis.URL.manages_query_role,data:{}}).then(function(e){0===e.data.result?t.desserts=e.data.datas:t.$Dialog.getProductCheckResult_({text:e.data.message,timeout:3e3,snackbar:!0}),t.loader=!1}).catch(function(e){t.$Dialog.getProductCheckResult_({text:e,timeout:3e3,snackbar:!0})})},detailsMessage:function(t){var e={state:!0,list:t};this.$refs.module2.info(e)},modifyMessage:function(t){var e={state:!0,list:t};this.$refs.module1.info(e)},delMessage:function(){var t=this;this.$axios({method:"post",url:this.$apis.URL.manages_delete_role,data:{role_id:this.id}}).then(function(e){0===e.data.result?(t.$Dialog.getProductCheckResult_({text:"角色删除成功!",timeout:3e3,snackbar:!0}),t.dialog_logout=!1,t.id="",t.info()):t.$Dialog.getProductCheckResult_({text:e.data.message,timeout:3e3,snackbar:!0})}).catch(function(e){t.$Dialog.getProductCheckResult_({text:e,timeout:3e3,snackbar:!0})})},delMessage_box:function(t){this.id=t,this.dialog_logout=!0}},watch:{}},K=z,G=(a("fc2f"),a("8fea")),N=a("132d"),Q=Object(u["a"])(K,o,i,!1,null,"77721e5e",null);e["default"]=Q.exports;h()(Q,{VBtn:v["a"],VCard:f["a"],VCardActions:_["a"],VCardText:_["b"],VCardTitle:m["a"],VChip:H["a"],VDataTable:G["a"],VDialog:g["a"],VFlex:x["a"],VIcon:N["a"],VLayout:b["a"],VSpacer:C["a"],VTextField:R["a"]})},ef8e:function(t,e,a){"use strict";var o=a("e2b2"),i=a.n(o);i.a},fc2f:function(t,e,a){"use strict";var o=a("2568"),i=a.n(o);i.a}}]);
//# sourceMappingURL=chunk-22bde2db.57b2ccea.js.map