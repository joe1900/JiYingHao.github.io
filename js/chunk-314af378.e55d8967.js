(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-314af378"],{"123f":function(t,e,a){},"27da":function(t,e,a){},4204:function(t,e,a){},"5f9c":function(t,e,a){"use strict";var i=a("123f"),s=a.n(i);s.a},9610:function(t,e,a){"use strict";var i=a("27da"),s=a.n(i);s.a},9910:function(t,e,a){"use strict";a.d(e,"a",function(){return l});var i=a("80d2"),s=a("a523"),n=a("549c"),o=a("0e8f"),r=a("a722"),l=Object(i["f"])("spacer","div","v-spacer");s["a"],n["a"],o["a"],r["a"]},a523:function(t,e,a){"use strict";a("db6d");var i=a("e8f2");e["a"]=Object(i["a"])("container")},a722:function(t,e,a){"use strict";a("db6d");var i=a("e8f2");e["a"]=Object(i["a"])("layout")},b5b4:function(t,e,a){"use strict";var i=a("4204"),s=a.n(i);s.a},dc54:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Breadcrumbs",{attrs:{items:t.items}}),a("Module1",{ref:"module1"}),a("Module2",{ref:"module2"}),a("v-card",[a("v-card-title",[a("v-layout",{attrs:{row:"",wrap:""}},[2!==t.level_type?a("v-flex",{attrs:{xs6:"",sm4:"",md2:""}},[a("v-select",{attrs:{"menu-props":"auto",items:t.agent_list,label:"所属代理商",required:""},on:{change:t.info},model:{value:t.agent_id,callback:function(e){t.agent_id=e},expression:"agent_id"}})],1):t._e(),a("v-flex",{attrs:{xs6:"",sm4:"",md2:""}},[a("v-text-field",{attrs:{label:"用户姓名"},model:{value:t.user_name,callback:function(e){t.user_name=e},expression:"user_name"}})],1),a("v-flex",{attrs:{xs6:"",sm4:"",md2:""}},[a("v-text-field",{attrs:{label:"手机号码"},model:{value:t.user_phone,callback:function(e){t.user_phone=e},expression:"user_phone"}})],1),a("v-btn",{attrs:{loading:t.loader,disabled:t.loader,color:"primary"},on:{click:function(e){return t.info(!1)}}},[t._v("筛选用户")])],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.desserts,"total-items":t.allList,"rows-per-page-text":"每页行数","rows-per-page-items":t.pagingList,"disable-initial-sort":!0,loading:t.loader},on:{"update:pagination":t.info},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",{on:{dblclick:function(a){return t.info_data(e.item)}}},[a("td",[a("v-avatar",{attrs:{size:"36px"}},[e.item.thumb_url?a("img",{attrs:{src:e.item.thumb_url,alt:"Avatar"}}):a("v-icon",[t._v("tag_faces")])],1)],1),a("td",{staticClass:"text-xs-centre"},[t._v(t._s(t._f("cover")(e.item.phone)))]),a("td",{staticClass:"text-xs-centre"},[t._v(t._s(e.item.user_name))]),a("td",{staticClass:"text-xs-centre"},[0==e.item.agent_name.length?a("v-chip",{attrs:{small:""}}):t._l(e.item.agent_name,function(e,i){return a("v-chip",{key:i,attrs:{small:""}},[t._v(t._s(e))])})],2),a("td",{staticClass:"text-xs-centre"},[0==e.item.birthday?a("span",[t._v(" ### ")]):a("span",[t._v(t._s(t._f("birthday")(e.item.birthday))+" ( "+t._s(t._f("age")(e.item.birthday))+" )")])]),a("td",{staticClass:"text-xs-centre"},[t._v(t._s(t._f("time")(e.item.created_time)))]),a("td",{staticClass:"text-xs-centre"},[t._v(t._s(t._f("time")(e.item.update_time)))]),a("td",{staticClass:"text-xs-centre"},[t._v(t._s(e.item.count_order)+" 笔")]),a("td",{staticClass:"text-xs-centre"},[t._v(t._s(e.item.charge_amt.toFixed(2))+" 元")]),a("td",{staticClass:"text-xs-centre"},[e.item.device_count>0?a("span",{staticClass:"green--text darken-4"},[t._v(" 已绑定设备 ("+t._s(e.item.device_count)+") ")]):t._e(),0==e.item.device_count?a("span",[t._v("未绑定设备")]):t._e()]),a("td",{staticClass:"text-xs-centre"},[a("v-menu",{attrs:{bottom:"",dark:"",origin:"center center","close-delay":100,transition:"slide-x-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-btn",t._g({attrs:{color:"primary",dark:""}},i),[t._v("操作选项")])]}}],null,!0)},[a("v-list",[a("v-list-tile",{on:{click:function(a){return t.info_data(e.item)}}},[a("v-list-tile-title",[a("v-icon",[t._v(" assignment_ind ")]),t._v(" 用户详情")],1)],1),t._l(t.root_path,function(i,s){return["/api/v1/order/list"==i.url?a("v-list-tile",{key:s,on:{click:function(a){return t.to_order(e.item.phone)}}},[a("v-list-tile-title",[a("v-icon",[t._v("assignment")]),t._v(" 用户订单")],1)],1):t._e()]}),e.item.device_count>0?a("v-list-tile",{on:{click:function(a){return t.user_equipment(e.item.id)}}},[a("v-list-tile-title",[a("v-icon",[t._v("leak_add")]),t._v(" 关联设备")],1)],1):t._e(),t._l(t.root_path,function(i,s){return["/api/v1/manages/cases_file"==i.url?a("v-list-tile",{key:s,on:{click:function(a){return t.files_data(e.item.id,e.item.thumb_url)}}},[a("v-list-tile-title",[a("v-icon",[t._v("description")]),t._v(" 病例档案")],1)],1):t._e()]}),t._l(t.root_path,function(i,s){return["/api/v1/user/edit"==i.url?a("v-list-tile",{key:s,on:{click:function(a){return t.modifyMessage(e.item)}}},[a("v-list-tile-title",[a("v-icon",[t._v("create")]),t._v(" 用户修改")],1)],1):t._e()]}),t._l(t.root_path,function(i,s){return["/api/v1/manages/ed_record"==i.url?a("v-list-tile",{key:s,on:{click:function(a){return t.ED_data(e.item.id)}}},[a("v-list-tile-title",[a("v-icon",[t._v("format_align_justify")]),t._v(" ED记录")],1)],1):t._e()]}),t._l(t.root_path,function(i,s){return["/api/v1/manages/ehs"==i.url?a("v-list-tile",{key:s,on:{click:function(a){return t.EHS_data(e.item.id)}}},[a("v-list-tile-title",[a("v-icon",[t._v("format_align_left")]),t._v(" EHS记录")],1)],1):t._e()]}),t._l(t.root_path,function(i,s){return["/api/v1/manages/iief5"==i.url?a("v-list-tile",{key:s,on:{click:function(a){return t.iief5_data(e.item.id)}}},[a("v-list-tile-title",[a("v-icon",[t._v("format_align_right")]),t._v(" IIEF5记录")],1)],1):t._e()]}),t._l(t.root_path,function(i,s){return["/api/v1/user/delete"==i.url?a("v-list-tile",{key:s,on:{click:function(a){return t.del_box(e.item.id)}}},[a("v-list-tile-title",{staticClass:"red--text"},[a("v-icon",{staticStyle:{color:"#f44336 !important"}},[t._v("person_add_disabled")]),t._v(" 删除用户")],1)],1):t._e()]})],2)],1)],1)])]}},{key:"no-data",fn:function(){return[a("p",{staticClass:"p_text"},[t._v("没有更多数据了 :(")])]},proxy:!0},{key:"pageText",fn:function(e){return[t._v("当前 "+t._s(e.pageStart)+" - "+t._s(e.pageStop)+" 总共 "+t._s(e.itemsLength))]}}])})],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.dialog_logout,callback:function(e){t.dialog_logout=e},expression:"dialog_logout"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("删除操作")]),a("v-card-text",[t._v("确认删除该用户吗？确认删除将不可恢复")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(e){t.dialog_logout=!1}}},[t._v("取消")]),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:t.delMessage}},[t._v("确认删除")])],1)],1)],1)],1)},s=[],n=(a("ac6a"),a("5fdf")),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"switch_"}},[a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("修改用户信息")])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"用户手机号码",type:"text",maxlength:"11",required:""},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"用户姓名",type:"text",required:""},model:{value:t.user_name,callback:function(e){t.user_name=e},expression:"user_name"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(e){t.dialog=!1}}},[t._v("取消")]),a("v-btn",{attrs:{color:"info darken-1"},on:{click:function(e){return t.childMethod(e)}}},[t._v("提交修改")])],1)],1)],1)],1)],1)},r=[],l={data:function(){return{dialog:!1,user_id:"",user_name:"",phone:""}},mounted:function(){},methods:{info:function(t){this.user_id=t.list.id,this.user_name=t.list.user_name,this.phone=t.list.phone,this.dialog=!0},childMethod:function(t){var e=this;return this.user_name.length<2||this.user_name.length>16?(this.$Dialog.getProductCheckResult_({text:"请输入正确格式的用户姓名!",timeout:3e3,snackbar:!0}),!1):11!==this.phone.length?(this.$Dialog.getProductCheckResult_({text:"请输入正确的手机号码!",timeout:3e3,snackbar:!0}),!1):void this.$axios({method:"post",url:this.$apis.URL.user_edit,data:{user_id:this.user_id,user_name:this.user_name,phone:this.phone}}).then(function(t){0===t.data.result?(e.$Dialog.getProductCheckResult_({text:"修改用户成功!",timeout:3e3,snackbar:!0}),e.user_name="",e.phone="",e.dialog=!1,e.$parent.info(!1)):e.$Dialog.getProductCheckResult_({text:t.data.message,timeout:3e3,snackbar:!0})}).catch(function(t){e.$Dialog.getProductCheckResult_({text:t,timeout:3e3,snackbar:!0})})}}},c=l,u=(a("9610"),a("2877")),d=a("6544"),_=a.n(d),v=a("8336"),h=a("b0af"),p=a("99d9"),m=a("12b2"),f=a("a523"),g=a("169a"),b=a("0e8f"),x=a("a722"),k=a("9910"),C=a("2677"),y=Object(u["a"])(c,o,r,!1,null,null,null),V=y.exports;_()(y,{VBtn:v["a"],VCard:h["a"],VCardActions:p["a"],VCardText:p["b"],VCardTitle:m["a"],VContainer:f["a"],VDialog:g["a"],VFlex:b["a"],VLayout:x["a"],VSpacer:k["a"],VTextField:C["a"]});var $=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"switch__"}},[a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-dialog",{attrs:{"max-width":"800px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("用户基本信息")])]),a("v-card-text",[a("p",{staticClass:"root_p"},[""!=t.data.thumb_url?a("v-img",{staticClass:"grey lighten-2",attrs:{src:t.data.thumb_url,"lazy-src":"https://picsum.photos/id/11/10/6","aspect-ratio":"1","max-width":"60"},on:{click:function(e){return t.img_(t.data.thumb_url)}}}):a("v-img",{staticClass:"grey lighten-2",attrs:{src:"https://picsum.photos/id/11/10/6","lazy-src":"https://picsum.photos/id/11/10/6","aspect-ratio":"1","max-width":"60"}})],1),a("p",{staticClass:"root_p"},[a("span",{staticClass:"order_title"},[t._v("手机号码")]),a("v-chip",[t._v(t._s(t._f("cover")(t.data.phone)))])],1),a("p",{staticClass:"root_p"},[a("span",{staticClass:"order_title"},[t._v("所属位置")]),a("v-chip",[t._v(t._s(t.location))])],1),a("p",{staticClass:"root_p"},[a("span",{staticClass:"order_title"},[t._v("用户姓名")]),a("v-chip",[t._v(t._s(t.data.user_name))])],1),t.data.agent_name.length>0?a("p",{staticClass:"root_p"},[a("span",{staticClass:"order_title"},[t._v("所属代理")]),t._l(t.data.agent_name,function(e,i){return a("v-chip",{key:i},[t._v(t._s(e))])})],2):a("p",{staticClass:"root_p"},[a("span",{staticClass:"order_title"},[t._v("所属代理")]),a("v-chip",[t._v(t._s("暂无记录"))])],1),a("p",{staticClass:"root_p"},[a("span",{staticClass:"order_title"},[t._v("用户生日")]),a("v-chip",[t._v(t._s(0==t.data.birthday?"暂无记录":t.data.birthday))])],1),a("p",{staticClass:"root_p"},[a("span",{staticClass:"order_title"},[t._v("订单笔数")]),a("v-chip",[t._v(t._s(t.data.count_order))])],1),a("p",{staticClass:"root_p"},[a("span",{staticClass:"order_title"},[t._v("充值金额")]),a("v-chip",[t._v(t._s(t.data.charge_amt.toFixed(2))+" 元 ")])],1),a("p",{staticClass:"root_p"},[a("span",{staticClass:"order_title"},[t._v("用户创建时间")]),a("v-chip",[t._v(t._s(t._f("time")(t.data.created_time)))])],1),a("p",{staticClass:"root_p"},[a("span",{staticClass:"order_title"},[t._v("上次更新时间")]),a("v-chip",[t._v(t._s(t._f("time")(t.data.update_time)))])],1)]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"info darken-1"},on:{click:function(e){t.dialog=!1}}},[t._v("确认")])],1)],1)],1)],1),a("v-snackbar",{attrs:{right:!0,timeout:t.alert.timeout,top:!0,"multi-line":!0},model:{value:t.alert.snackbar,callback:function(e){t.$set(t.alert,"snackbar",e)},expression:"alert.snackbar"}},[t._v("\n    "+t._s(t.alert.text)+"\n    "),a("v-btn",{attrs:{color:"pink",flat:""},on:{click:function(e){t.alert.snackbar=!1}}},[t._v("确认")])],1)],1)},w=[],D={data:function(){return{alert:{text:"",timeout:3e3,snackbar:!1},dialog:!1,data:{agent_name:[],charge_amt:0,thumb_url:""},location:"正在获取..."}},mounted:function(){},methods:{info:function(t){var e=this;this.dialog=t.state,this.data=t.list,""==this.data.thumb_url?this.data.thumb_url="":this.data.thumb_url,this.$axios({method:"post",url:this.$apis.URL.user_location,data:{phone:this.data.phone}}).then(function(t){0===t.data.result?null!==t.data.datas.response[e.data.phone]?e.location=t.data.datas.response[e.data.phone].location:e.location="获取位置失败":e.$Dialog.getProductCheckResult_({text:t.data.message,timeout:3e3,snackbar:!0})}).catch(function(t){e.$Dialog.getProductCheckResult_({text:"😡"+t,timeout:3e3,snackbar:!0})})},img_:function(t){""!=t&&window.open(t,"newwindow","height=600, width=800, top=".concat(document.body.clientHeight/2-200,", left=").concat(document.body.clientWidth/2-400,", toolbar=no, menubar=no, scrollbars=no, resizable=no,location=no, status=no"))}}},L=D,R=(a("b5b4"),a("cc20")),P=a("adda"),S=a("2db4"),E=Object(u["a"])(L,$,w,!1,null,null,null),T=E.exports;_()(E,{VBtn:v["a"],VCard:h["a"],VCardActions:p["a"],VCardText:p["b"],VCardTitle:m["a"],VChip:R["a"],VDialog:g["a"],VImg:P["a"],VLayout:x["a"],VSnackbar:S["a"],VSpacer:k["a"]});var q={components:{Breadcrumbs:n["a"],Module1:V,Module2:T},data:function(){return{user_name:"",user_phone:"",agent_name:"",agent_id:0,agent_list:[],agent_list_data:[],dialog_logout:!1,user_id:"",pagingList:[10,20,30,40,50,{text:"100",value:100}],loader:!1,page:0,page_count:10,allList:0,items:[{text:"首页",disabled:!1,to:"/home"},{text:"用户列表",disabled:!1,to:"/userList"}],headers:[{text:"头像",align:"left",sortable:!1,value:"name"},{text:"用户手机号",value:"calories",sortable:!1},{text:"用户姓名",value:"fat",sortable:!1},{text:"所属代理",value:"fat",sortable:!1},{text:"生日",value:"carbs",sortable:!1},{text:"用户创建时间",value:"iron",sortable:!1},{text:"上次更新时间",value:"iron",sortable:!1},{text:"订单笔数",value:"iron",sortable:!1},{text:"充值金额",value:"iron",sortable:!1},{text:"状态",value:"iron",sortable:!1},{text:"操作",value:"iron",sortable:!1}],desserts:[],root_path:this.$cookie.getLocalStorage("root_path").root_path,level_type:this.$cookie.getLocalStorage("root_path").level}},mounted:function(){this.agent_data()},methods:{to_order:function(t){this.$router.push({name:"order",params:{phone:t}})},user_equipment:function(t){this.$router.push({path:"/deviceList",query:{user_id:t}})},agent_data:function(){var t=this;this.$axios({method:"post",url:this.$apis.URL.manages_query_agent,data:{id:-1,level:2}}).then(function(e){t.agent_list.push("全部代理"),t.agent_list_data=e.data.datas,0===e.data.result?t.agent_list_data.forEach(function(e){t.agent_list.push(e.user_name)}):t.$Dialog.getProductCheckResult_({text:e.data.message,timeout:3e3,snackbar:!0}),void 0!==t.$route.query.agent_name&&(t.agent_id=t.$route.query.agent_name,t.info(!1))}).catch(function(e){t.$Dialog.getProductCheckResult_({text:"😡"+e,timeout:3e3,snackbar:!0})})},ED_data:function(t){this.$router.push({path:"/ED",query:{user_id:t}})},EHS_data:function(t){this.$router.push({path:"/EHS",query:{user_id:t}})},iief5_data:function(t){this.$router.push({path:"/iief5",query:{user_id:t}})},files_data:function(t,e){this.$router.push({path:"/files",query:{user_id:t,img:e}})},info_data:function(t){var e={state:!0,list:t};this.$refs.module2.info(e)},modifyMessage:function(t){var e={state:!0,list:t};this.$refs.module1.info(e)},del_box:function(t){this.user_id=t,this.dialog_logout=!0},delMessage:function(){var t=this;this.$axios({method:"post",url:this.$apis.URL.user_delete,data:{user_id:this.user_id}}).then(function(e){0===e.data.result?(t.$Dialog.getProductCheckResult_({text:"用户已删除，操作完成",timeout:3e3,snackbar:!0}),t.dialog_logout=!1,t.info(!1)):t.$Dialog.getProductCheckResult_({text:e.data.message,timeout:3e3,snackbar:!0})}).catch(function(e){t.$Dialog.getProductCheckResult_({text:e,timeout:3e3,snackbar:!0})})},loader_:function(){var t=this;this.loader=!0,setTimeout(function(){return t.loader=!1},500)},info:function(t){var e=this;this.loader=!0;var a=0;this.agent_list_data.forEach(function(t){if(e.agent_id==t.user_name)return a=t.id,!1}),this.$axios({method:"post",url:this.$apis.URL.user_list,data:{agent_id:a,user_name:this.user_name,phone:this.user_phone,page:0==t?this.page:t.page-1,page_count:0==t?this.page_count:t.rowsPerPage}}).then(function(t){0===t.data.result?(e.desserts=t.data.datas.list,e.allList=t.data.datas.total_number):e.$Dialog.getProductCheckResult_({text:t.data.message,timeout:3e3,snackbar:!0}),e.loader=!1}).catch(function(t){e.$Dialog.getProductCheckResult_({text:t,timeout:3e3,snackbar:!0})})}},watch:{}},M=q,j=(a("5f9c"),a("8212")),F=a("8fea"),O=a("132d"),A=a("8860"),B=a("ba95"),H=a("5d23"),U=a("e449"),z=a("b56d"),I=Object(u["a"])(M,i,s,!1,null,"73589fcc",null);e["default"]=I.exports;_()(I,{VAvatar:j["a"],VBtn:v["a"],VCard:h["a"],VCardActions:p["a"],VCardText:p["b"],VCardTitle:m["a"],VChip:R["a"],VDataTable:F["a"],VDialog:g["a"],VFlex:b["a"],VIcon:O["a"],VLayout:x["a"],VList:A["a"],VListTile:B["a"],VListTileTitle:H["d"],VMenu:U["a"],VSelect:z["a"],VSpacer:k["a"],VTextField:C["a"]})}}]);
//# sourceMappingURL=chunk-314af378.e55d8967.js.map